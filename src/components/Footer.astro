---
import { getCollection } from "astro:content";

const allPosts = await getCollection("posts");
const categories = [...new Set(allPosts.map((post) => post.data.category))];
---

<footer
    class="bg-card-light dark:bg-card-dark border-t border-slate-200 dark:border-white/5 py-12"
>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col md:flex-row justify-between gap-12">
            <div class="max-w-md">
                <a href="/" class="flex items-center space-x-3 mb-6 group">
                    <div class="relative w-8 h-8">
                        <div
                            class="absolute inset-0 bg-primary/20 rounded-lg rotate-6 group-hover:rotate-12 transition-transform duration-300"
                        >
                        </div>
                        <div
                            class="relative w-full h-full rounded-lg bg-primary flex items-center justify-center text-white shadow-lg shadow-primary/20 group-hover:shadow-primary/40 transition-all duration-300 transform group-hover:-translate-y-0.5"
                        >
                            <div
                                class="grid place-items-center leading-[0.7] font-mono font-black text-[9px] pt-0.5"
                            >
                                <span class="tracking-tight">&lt;/</span>
                                <span class="tracking-widest ml-1">&gt;_</span>
                            </div>
                        </div>
                    </div>
                    <span
                        class="font-display font-bold text-xl uppercase tracking-tighter text-slate-900 dark:text-white"
                        >Dimon<span class="text-primary">Blog</span></span
                    >
                </a>
                <p class="text-slate-500 text-sm mb-6 leading-relaxed">
                    Practical guides and insights for Home Assistant, Zigbee,
                    ESPHome, and DIY smart home automation.
                </p>
                <div class="flex space-x-4">
                    <a
                        class="text-slate-400 hover:text-primary transition-colors"
                        href="https://github.com/dimonb"
                        target="_blank"
                        aria-label="Github"
                        ><span class="text-xl font-bold">Gh</span></a
                    >
                    <a
                        class="text-slate-400 hover:text-primary transition-colors"
                        href="https://t.me/dimonb"
                        target="_blank"
                        aria-label="Telegram"
                        ><span class="text-xl font-bold">Tg</span></a
                    >
                    <a
                        class="text-slate-400 hover:text-primary transition-colors"
                        href="https://twitter.com/dimonb"
                        target="_blank"
                        aria-label="Twitter"
                        ><span class="text-xl font-bold">X</span></a
                    >
                    <a
                        class="text-slate-400 hover:text-primary transition-colors"
                        href="https://linkedin.com/in/dimonb"
                        target="_blank"
                        aria-label="LinkedIn"
                        ><span class="text-xl font-bold">In</span></a
                    >
                    <a
                        class="text-slate-400 hover:text-primary transition-colors"
                        href="mailto:blog@dimonb.com"
                        aria-label="Email"
                        ><span class="material-icons">email</span></a
                    >
                </div>
            </div>

            <div class="min-w-[200px]">
                <h4 class="text-slate-900 dark:text-white font-bold mb-4">
                    Categories
                </h4>
                <ul
                    class="space-y-2 text-sm text-slate-500 dark:text-slate-400"
                >
                    {
                        categories.map((category) => (
                            <li>
                                <a
                                    class="hover:text-primary transition-colors"
                                    href={`/archive?topic=${encodeURIComponent(category)}`}
                                >
                                    {category}
                                </a>
                            </li>
                        ))
                    }
                </ul>
            </div>
        </div>

        <div
            class="border-t border-slate-200 dark:border-white/5 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center gap-4"
        >
            <p class="text-slate-500 text-xs text-center md:text-left">
                © {new Date().getFullYear()} DevBlog Media. All rights reserved.
            </p>
            <div class="text-slate-500 text-xs flex items-center gap-2">
                <span>Built with Astro</span>
                <span>•</span>
                <span>Tailwind CSS</span>
            </div>
        </div>
    </div>
</footer>
